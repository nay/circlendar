<% participating = attendances.select { |a| a.status == "attending" || a.after_party == "attending" } %>
<div class="bg-white shadow sm:rounded-lg">
  <% if participating.any? %>
    <ul class="divide-y divide-gray-200">
      <% participating.each do |attendance| %>
        <li class="px-4 py-4 sm:px-6">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
            <div class="font-medium text-gray-900">
              <%= link_to attendance.player.name, admin_user_path(attendance.player.user), class: "text-blue-600 hover:text-blue-700" %>
              <% if attendance.player.formatted_rank %>
                <span class="ml-2 text-sm font-normal text-gray-500"><%= attendance.player.formatted_rank %></span>
              <% end %>
            </div>
            <%
              status_color = case attendance.status
                when "attending" then "text-green-600"
                when "not_attending" then "text-gray-500"
                when "undecided" then "text-yellow-600"
              end
              after_color = case attendance.after_party
                when "attending" then "text-green-600"
                when "not_attending" then "text-gray-500"
                when "undecided" then "text-yellow-600"
              end
            %>
            <div class="text-sm text-gray-600 flex gap-4">
              <span class="inline-flex"><span class="w-12">練習:</span><span class="w-12 text-center font-medium <%= status_color %>"><%= I18n.t("activerecord.attributes.attendance.statuses.#{attendance.status}") %></span></span>
              <span class="inline-flex"><span class="w-16">アフター:</span><span class="w-12 text-center font-medium <%= after_color %>"><%= I18n.t("activerecord.attributes.attendance.after_parties.#{attendance.after_party}") %></span></span>
            </div>
          </div>
          <% if attendance.message.present? %>
            <div class="mt-2 text-sm text-gray-500 whitespace-pre-wrap"><%= attendance.message %></div>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="px-4 py-5 sm:p-6 text-center text-gray-500">
      参加者はいません
    </div>
  <% end %>
</div>
