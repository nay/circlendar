<div class="w-full max-w-2xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">出席情報の登録</h1>
    <p class="mt-2 text-gray-600">
      <%= l(@event.date, format: :long) %> <%= @event.schedule %>
    </p>
    <p class="mt-1 text-gray-600">
      <%= @event.venue.name %>
    </p>
  </div>

  <%= form_with(model: @attendance, url: event_attendance_path(@event), method: :patch, class: "bg-white shadow sm:rounded-lg") do |form| %>
    <div class="px-4 py-5 sm:p-6 space-y-6">
      <!-- ステータス -->
      <div>
        <%= form.label :status, "出席状況", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <div class="grid grid-cols-3 gap-3" data-controller="radio-buttons">
          <% Attendance.statuses.keys.each do |status| %>
            <label class="flex items-center justify-center px-4 py-3 border-2 rounded-lg cursor-pointer <%= @attendance.status == status ? 'border-blue-500 bg-blue-50' : 'border-gray-300 bg-white' %>" data-radio-buttons-target="option">
              <%= form.radio_button :status, status, class: "sr-only", data: { action: "change->radio-buttons#select" } %>
              <span class="text-sm font-medium text-gray-900">
                <%= I18n.t("activerecord.attributes.attendance.statuses.#{status}") %>
              </span>
            </label>
          <% end %>
        </div>
      </div>

      <!-- 到着時刻 -->
      <div>
        <%= form.label :arrival_time, "到着予定時刻", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= form.time_field :arrival_time, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" %>
      </div>

      <!-- 退出時刻 -->
      <div>
        <%= form.label :departure_time, "退出予定時刻", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= form.time_field :departure_time, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" %>
      </div>

      <!-- アフター -->
      <div>
        <%= form.label :after_party, "アフター", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <div class="grid grid-cols-3 gap-3" data-controller="radio-buttons">
          <% Attendance.after_parties.keys.each do |after_party| %>
            <label class="flex items-center justify-center px-4 py-3 border-2 rounded-lg cursor-pointer <%= @attendance.after_party == after_party ? 'border-blue-500 bg-blue-50' : 'border-gray-300 bg-white' %>" data-radio-buttons-target="option">
              <%= form.radio_button :after_party, after_party, class: "sr-only", data: { action: "change->radio-buttons#select" } %>
              <span class="text-sm font-medium text-gray-900">
                <%= I18n.t("activerecord.attributes.attendance.after_parties.#{after_party}") %>
              </span>
            </label>
          <% end %>
        </div>
      </div>

      <!-- メッセージ -->
      <div>
        <%= form.label :message, "メッセージ", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= form.text_area :message, rows: 4, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm", placeholder: "連絡事項があればこちらへどうぞ" %>
      </div>
    </div>

    <div class="px-4 py-3 bg-gray-50 text-right sm:px-6 space-x-3 sm:rounded-b-lg">
      <%= link_to "キャンセル", dashboard_path, class: "inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
      <%= form.submit "保存", class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer" %>
    </div>
  <% end %>
</div>
